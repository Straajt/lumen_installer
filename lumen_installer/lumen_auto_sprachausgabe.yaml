
# üåç Dynamische Sprachauswahl basierend auf Anwesenheit (David = Deutsch, Miska = Slowakisch)

script:
  lumen_dynamische_sprachausgabe:
    alias: "üí¨ Lumen - Sprachdemo (Auto)"
    sequence:
      - variables:
          sprache: >
            {% if is_state('person.miska', 'home') and not is_state('person.david', 'home') %}
              sk-SK
            {% elif is_state('person.david', 'home') and not is_state('person.miska', 'home') %}
              de-DE
            {% elif is_state('person.david', 'home') and is_state('person.miska', 'home') %}
              sk-SK
            {% else %}
              de-DE
            {% endif %}
      - service: tts.cloud_say
        data:
          entity_id: media_player.arc
          message: >
            {% if sprache == 'sk-SK' %}
              Vitaj doma, legenda. V≈°etko je pripraven√©.
            {% elif sprache == 'de-DE' %}
              Willkommen zu Hause, Legende. Alles l√§uft wie geplant.
            {% else %}
              Welcome home, legend. Everything is running smooth.
            {% endif %}
          language: "{{ sprache }}"

# Lovelace Button zum Testen
lovelace:
  views:
    - title: Sprache Demo
      path: sprache
      cards:
        - type: button
          name: üéôÔ∏è Sprachtest
          icon: mdi:translate
          tap_action:
            action: call-service
            service: script.lumen_dynamische_sprachausgabe
